<bean id="incidentServiceTarget"
      class="org.fusesource.devoxx.reportincident.service.impl.IncidentServiceImpl">
  <property name="incidentDAO">
    <osgi:reference interface="org.fusesource.devoxx.reportincident.dao.IncidentDAO"/>
  </property>
</bean>

<bean id="abstractService" abstract="true"
      class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean">
  <property name="transactionManager">
    <osgi:reference id="txManager" filter="(tx=JPA)"
              interface="org.springframework.transaction.PlatformTransactionManager"/>
  </property>
</bean>

<bean id="incidentService"
      parent="abstractService"
      class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean">

  <property name="target">
    <ref bean="incidentServiceTarget" />
  </property>

  <property name="proxyInterfaces">
    <list>
      <value>org.fusesource.devoxx.reportincident.service.IncidentService</value>
    </list>
  </property>

  <property name="transactionAttributes">
    <props>
      <prop key="*">PROPAGATION_REQUIRED</prop>
    </props>
  </property>
</bean>
